<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RT0B6NXFG6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-RT0B6NXFG6');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval'; connect-src 'self' https://generativelanguage.googleapis.com https://www.googletagmanager.com https://www.google-analytics.com https://cdn.jsdelivr.net; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.googletagmanager.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline';">
    <title>Vanilla Option Modeler</title>
    <!-- Load Chart.js with all required modules -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="/css/styles.css">
    <!-- Mobile Responsiveness Enhancements -->
    <link rel="stylesheet" href="/css/mobile-responsive.css">
    <!-- Add navigation bar styles -->
    <style>
        :root {
            --primary-color: #2ecc71;
            --secondary-color: #27ae60;
            --accent-color: #3498db; /* Blue for contrast */
            --gray-100: #f8f9fa;
            --gray-200: #e9ecef;
            --gray-300: #dee2e6;
            --gray-400: #ced4da;
            --gray-500: #adb5bd;
            --gray-600: #6c757d;
            --gray-700: #495057;
            --gray-800: #343a40;
            --gray-900: #212529;
        }

        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow-x: hidden;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.5;
            background-color: #f9f9f9;
            color: var(--gray-800);
        }

        .nav-bar {
            background-color: #2ecc71;
            color: white;
            padding: 15px 40px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            height: 30px;
            margin: 0;
            border: none;
        }

        .nav-bar a {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: white;
            font-weight: 500;
            gap: 12px;
            font-size: 16px;
        }

        .nav-bar .nav-title {
            margin-left: auto;
            font-weight: 600;
            color: white;
            font-size: 16px;
            letter-spacing: 0.5px;
        }

        .container {
            max-width: 100%;
            margin: 75px auto 0;
            padding: 0 20px;
        }

        .header-section {
            margin: 0 0 30px;
            padding: 25px 20px;
            background: var(--gray-100);
            border-radius: 8px;
            width: 100%;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            margin-right: 15px;
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
        }

        .logo::before {
            content: "";
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: rgba(255, 255, 255, 0.9);
            clip-path: polygon(0 0, 100% 0, 100% 20%, 20% 20%, 20% 100%, 0 100%);
            top: 10px;
            left: 10px;
        }

        .logo::after {
            content: "";
            position: absolute;
            width: 15px;
            height: 15px;
            background-color: rgba(255, 255, 255, 0.75);
            clip-path: polygon(0 0, 100% 0, 100% 100%, 80% 100%, 80% 80%, 0 80%);
            bottom: 10px;
            right: 10px;
        }

        .logo-text {
            flex: 1;
        }

        .logo-title {
            font-size: 24px;
            color: var(--gray-900);
            margin: 0;
            font-weight: 600;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        .logo-subtitle {
            font-size: 16px;
            color: var(--gray-600);
            margin: 4px 0 0;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        .author-info {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 4px;
            color: var(--gray-600);
            font-size: 14px;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        .tool-description {
            font-size: 15px;
            color: var(--gray-700);
            line-height: 1.6;
            margin: 0;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        .main-content {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 25px;
            margin-bottom: 20px;
        }

        .input-section {
            background: white;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--gray-700);
            font-weight: 500;
            font-size: 14px;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--gray-300);
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.2s;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.1);
        }

        .chart-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            height: 800px;
            display: flex;
            flex-direction: column;
        }

        .chart-container {
            flex: 1;
            position: relative;
            width: 100%;
            height: calc(100% - 40px);
            margin-top: 10px;
        }

        .chart-title {
            font-size: 18px;
            color: var(--gray-800);
            margin-bottom: 10px;
            font-weight: 500;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        .results-section {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin: 0 0 40px;
            padding: 30px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            width: 100%;
        }

        .result-card {
            background: var(--gray-100);
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s ease;
            border: 1px solid var(--gray-200);
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .result-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08);
        }

        .result-title {
            font-size: 18px;
            color: var(--gray-700);
            margin-bottom: 15px;
            font-weight: 500;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        .result-value {
            font-size: 32px;
            font-weight: 600;
            margin: 10px 0;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        .result-description {
            font-size: 14px;
            color: var(--gray-600);
            margin-top: 10px;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            max-width: 200px;
            line-height: 1.4;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 25px;
            }

            .chart-section {
                height: 600px;
            }

            .results-section {
                padding: 25px;
                gap: 20px;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .results-section {
                grid-template-columns: 1fr;
                gap: 15px;
                padding: 20px;
            }

            .result-card {
                padding: 20px;
                min-height: 140px;
                width: 100%;
                box-sizing: border-box;
            }

            .result-value {
                font-size: 28px;
            }
            
            .result-title {
                font-size: 16px;
                margin-bottom: 12px;
            }
            
            .result-description {
                font-size: 13px;
                line-height: 1.4;
            }
        }

        @media (max-width: 480px) {
            .results-section {
                padding: 15px;
                gap: 12px;
            }
            
            .result-card {
                padding: 18px;
                min-height: 120px;
            }
            
            .result-value {
                font-size: 24px;
            }
            
            .result-title {
                font-size: 15px;
            }
        }

        /* Ensure proper aspect ratio and prevent distortion */
        @media (min-width: 769px) and (max-width: 1200px) {
            .results-section {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
            
            .result-card {
                min-height: 160px;
            }
        }

        @media (min-width: 1201px) {
            .results-section {
                grid-template-columns: repeat(3, 1fr);
                gap: 30px;
            }
            
            .result-card {
                min-height: 180px;
            }
        }

        .disclaimer {
            margin: 40px 0;
            padding: 30px;
            background-color: var(--gray-100);
            border-radius: 8px;
        }

        .disclaimer h2 {
            color: var(--gray-800);
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .disclaimer p {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        /* Result section styling */
        .result-section {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }
        .result-card {
            background-color: #fff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            text-align: center;
            position: relative;
        }
        .result-title {
            font-size: 16px;
            color: #5D6D7E;
            margin-bottom: 10px;
            position: relative;
            display: inline-block;
        }
        .result-title .tooltip-icon {
            display: inline-block;
            width: 16px;
            height: 16px;
            background-color: #5D6D7E;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 16px;
            font-size: 12px;
            cursor: help;
            margin-left: 4px;
            vertical-align: middle;
        }
        .result-title .tooltip-text {
            visibility: hidden;
            width: 250px;
            background-color: #2c3e50;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 13px;
            font-weight: normal;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }
        .result-title .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #2c3e50 transparent transparent transparent;
        }
        .result-title:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        .result-value {
            font-size: 36px;
            font-weight: 600;
            margin: 10px 0;
        }
        .result-value.positive {
            color: #2ecc71;
        }
        .result-value.negative {
            color: #e74c3c;
        }
        .result-description {
            font-size: 12px;
            color: #95a5a6;
            margin-top: 5px;
            display: none; /* Hide the descriptions as requested */
        }

        /* Formula explanation styling */
        .toggle-explanation {
            display: inline-flex;
            align-items: center;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 20px;
            padding: 6px 12px;
            font-size: 13px;
            color: #6c757d;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.2s ease;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        
        .toggle-explanation svg {
            margin-left: 6px;
            transition: transform 0.3s ease;
        }
        
        .toggle-explanation.expanded svg {
            transform: rotate(180deg);
        }
        
        .toggle-explanation:hover {
            background: #e9ecef;
            color: #495057;
        }
        
        .math-explanation {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            text-align: left;
            animation: fadeIn 0.3s ease;
            position: relative;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .math-explanation.visible {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .math-formula {
            display: block;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            line-height: 1.8;
            padding: 12px 15px;
            background: white;
            border-radius: 6px;
            margin: 10px 0;
            font-size: 14px;
            color: #2c3e50;
            border: 1px solid #e9ecef;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        
        .math-explanation p {
            font-size: 14px;
            margin: 10px 0;
            color: #495057;
        }
        
        .math-explanation ul {
            padding-left: 20px;
            margin: 10px 0;
        }
        
        .math-explanation li {
            margin: 8px 0;
            font-size: 14px;
            color: #495057;
            line-height: 1.6;
        }
        
        .formula-step {
            display: flex;
            align-items: center;
            margin: 8px 0;
        }
        
        .formula-step .step-number {
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: #3498db;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            margin-right: 10px;
            flex-shrink: 0;
        }
        
        .formula-variable {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            margin: 0 2px;
            font-weight: 500;
        }
        
        .variable-intrinsic {
            background: rgba(52, 152, 219, 0.1);
            color: #3498db;
            border: 1px solid rgba(52, 152, 219, 0.2);
        }
        
        .variable-options {
            background: rgba(155, 89, 182, 0.1);
            color: #9b59b6;
            border: 1px solid rgba(155, 89, 182, 0.2);
        }
        
        .variable-cost {
            background: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
            border: 1px solid rgba(231, 76, 60, 0.2);
        }
        
        .variable-result {
            background: rgba(46, 204, 113, 0.1);
            color: #2ecc71;
            border: 1px solid rgba(46, 204, 113, 0.2);
        }
        
        .variable-result.negative {
            background: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
            border: 1px solid rgba(231, 76, 60, 0.2);
        }
        
        .formula-equals {
            margin: 0 8px;
            color: #7f8c8d;
        }
        
        /* Tooltip styling improvements */
        .tooltip-text {
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }
    </style>
</head>
<body>
    <div class="nav-bar">
        <a href="home.html">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
            Home
        </a>
        <span class="nav-title">VANILLA OPTION MODELER</span>
    </div>

    <div class="container">
        <div class="header-section">
            <div class="logo-container">
                <div class="logo"></div>
                <div class="logo-text">
                    <h1 class="logo-title">Vanilla Option Modeler</h1>
                    <span class="logo-subtitle">Option Value Calculator</span>
                    <div class="author-info">
                        <span>by Amal Ganatra</span>
                        <a href="https://www.linkedin.com/in/amalganatra/" target="_blank" rel="noopener noreferrer">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="linkedin-icon" viewBox="0 0 16 16">
                                <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="tool-description">
                <p>A financial modeling tool that helps you analyze vanilla options by calculating their value at different price points. This calculator helps you understand whether options are in-the-money or out-of-the-money, and visualizes the total value, number of options, and net gain after paying the exercise price.</p>
            </div>
        </div>

        <div class="main-content">
            <div class="input-section">
                <div class="input-group">
                    <label for="optionType">Option Type</label>
                    <select id="optionType" class="input" onchange="calculateOptionValue()">
                        <option value="call">Call Option</option>
                        <option value="put">Put Option</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="strikePrice">Strike Price ($)</label>
                    <input type="number" id="strikePrice" min="0" step="0.01" value="95" oninput="calculateOptionValue()">
                </div>

                <div class="input-group">
                    <label for="currentPrice">Current Stock Price ($)</label>
                    <input type="number" id="currentPrice" min="0" step="0.01" value="100" oninput="calculateOptionValue()">
                </div>

                <div class="input-group">
                    <label for="optionPrice">Option Price ($)</label>
                    <input type="number" id="optionPrice" min="0" step="0.01" value="5" oninput="calculateOptionValue()">
                </div>

                <div class="input-group">
                    <label for="numOptions">Number of Options</label>
                    <input type="number" id="numOptions" min="1" value="100" oninput="calculateOptionValue()">
                </div>

                <div class="input-group">
                    <label for="priceRange">Price Range ($)</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="number" id="minPrice" min="0" step="0.01" value="40" oninput="calculateOptionValue()">
                        <span style="align-self: center;">to</span>
                        <input type="number" id="maxPrice" min="0" step="0.01" value="150" oninput="calculateOptionValue()">
                    </div>
                </div>
            </div>

            <div class="chart-section">
                <h3 class="chart-title" id="chartTitle">$95 Call Option</h3>
                <div class="chart-container">
                    <canvas id="optionChart"></canvas>
                </div>
            </div>
        </div>

        <div class="results-section">
            <div class="result-card">
                <div class="result-title">
                    Option Status
                    <span class="tooltip-icon">?</span>
                    <span class="tooltip-text">Indicates whether the option is in-the-money (profitable to exercise), out-of-the-money (not profitable to exercise), or at-the-money (break-even).</span>
                </div>
                <div id="optionStatus" class="result-value">At-the-Money</div>
                <div class="result-description">Whether the option is in-the-money or out-of-the-money</div>
            </div>

            <div class="result-card">
                <div class="result-title">
                    Total Value
                    <span class="tooltip-icon">?</span>
                    <span class="tooltip-text">The total value of all options at the current market price, calculated as the intrinsic value multiplied by the number of options.</span>
                </div>
                <div id="totalValue" class="result-value">$0</div>
                <div class="result-description">Total value of the options at current price</div>
            </div>

            <div class="result-card">
                <div class="result-title">
                    Net Gain/Loss
                    <span class="tooltip-icon">?</span>
                    <span class="tooltip-text">The total profit or loss after accounting for the option purchase cost. Calculated as (Total Value - Option Cost). Positive values represent profit, negative values represent loss.</span>
                </div>
                <div id="netGain" class="result-value">$0</div>
                <div class="result-description">Total profit or loss including option purchase cost</div>
                
                <button id="toggleExplanation" class="toggle-explanation">
                    Show Formula
                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
                
                <div id="mathExplanation" class="math-explanation">
                    <p>The net gain/loss is calculated as:</p>
                    <div class="math-formula">
                        <div class="formula-step">
                            <span class="step-number">1</span>
                            <span>Net Gain/Loss = <span class="formula-variable variable-intrinsic">Intrinsic Value</span> × <span class="formula-variable variable-options">Number of Options</span> - <span class="formula-variable variable-cost">Option Cost</span></span>
                        </div>
                        <div class="formula-step">
                            <span class="step-number">2</span>
                            <span>= <span class="formula-variable variable-intrinsic" id="formula-intrinsic-value">$5.00</span> × <span class="formula-variable variable-options" id="formula-num-options">100</span> - <span class="formula-variable variable-cost" id="formula-option-cost">$500.00</span></span>
                        </div>
                        <div class="formula-step">
                            <span class="step-number">3</span>
                            <span>= <span class="formula-variable variable-intrinsic" id="formula-total-value">$500.00</span> - <span class="formula-variable variable-cost" id="formula-cost-total">$500.00</span></span>
                        </div>
                        <div class="formula-step">
                            <span class="step-number">4</span>
                            <span>= <span class="formula-variable variable-result" id="formula-result">$0.00</span></span>
                        </div>
                    </div>
                    <p>Where:</p>
                    <ul id="formula-explanation-list">
                        <li><span class="formula-variable variable-intrinsic">Intrinsic Value</span> = The option's value if exercised immediately</li>
                        <li><span class="formula-variable variable-cost">Option Cost</span> = Option Price × Number of Options (what you paid)</li>
                        <li>A negative result represents a loss on your investment</li>
                    </ul>
                    <p>This represents your actual profit or loss, factoring in what you paid for the options.</p>
                </div>
            </div>
        </div>

        <div class="disclaimer">
            <h2>Disclaimer</h2>
            <p>This Vanilla Option Modeler is provided solely for educational and informational purposes. The calculations, projections, and analyses generated by this tool are intended to serve as general illustrations of potential investment outcomes and should not be relied upon for making investment decisions.</p>
            <p>The information provided herein does not constitute legal, financial, tax, or investment advice. Prior to finalizing any investment or transaction, users should consult with qualified legal counsel, financial advisors, and other professional advisors to ensure compliance with applicable laws and regulations and to address specific circumstances.</p>
            <p>The creators of this tool make no representations or warranties of any kind, express or implied, about the completeness, accuracy, reliability, suitability, or availability of the tool or the information generated. Any reliance you place on such information is strictly at your own risk.</p>
        </div>
    </div>

    <footer style="background-color: #f8f9fa; padding: 20px 0; text-align: center; margin-top: 40px; border-top: 1px solid #e9ecef;">
        <div style="max-width: 1200px; margin: 0 auto; padding: 0 20px;">
            <p style="font-size: 16px; color: #6c757d; margin-bottom: 10px;">Developed by Amal Ganatra
                <a href="https://www.linkedin.com/in/amalganatra/" target="_blank" rel="noopener noreferrer" style="color: #6c757d; text-decoration: none;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="margin-left: 5px; vertical-align: middle;">
                        <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/>
                    </svg>
                </a>
            </p>
            <p style="font-size: 16px; color: #6c757d; margin: 0;">© 2025 All Rights Reserved</p>
        </div>
    </footer>

    <script>
        let optionChart = null;

        function calculateOptionValue() {
            const optionType = document.getElementById('optionType').value;
            const strikePrice = parseFloat(document.getElementById('strikePrice').value);
            const currentPrice = parseFloat(document.getElementById('currentPrice').value);
            const optionPrice = parseFloat(document.getElementById('optionPrice').value);
            const numOptions = parseInt(document.getElementById('numOptions').value);
            const minPrice = parseFloat(document.getElementById('minPrice').value);
            const maxPrice = parseFloat(document.getElementById('maxPrice').value);

            // Update chart title
            document.getElementById('chartTitle').textContent = `$${strikePrice} ${optionType.charAt(0).toUpperCase() + optionType.slice(1)} Option`;

            // Calculate option status
            let optionStatus;
            if (optionType === 'call') {
                if (currentPrice > strikePrice) {
                    optionStatus = 'In-the-Money';
                } else if (currentPrice < strikePrice) {
                    optionStatus = 'Out-of-the-Money';
                } else {
                    optionStatus = 'At-the-Money';
                }
            } else {
                if (currentPrice < strikePrice) {
                    optionStatus = 'In-the-Money';
                } else if (currentPrice > strikePrice) {
                    optionStatus = 'Out-of-the-Money';
                } else {
                    optionStatus = 'At-the-Money';
                }
            }

            // Calculate intrinsic value
            let intrinsicValue;
            if (optionStatus === 'In-the-Money') {
                intrinsicValue = optionType === 'call' ? 
                    currentPrice - strikePrice : 
                    strikePrice - currentPrice;
            } else {
                intrinsicValue = 0;
            }

            // Calculate total value and net gain (allowing negative values)
            const totalValue = intrinsicValue * numOptions;
            const optionCost = optionPrice * numOptions;
            const netGain = totalValue - optionCost;
            
            // Update DOM with calculated values
            document.getElementById('optionStatus').textContent = optionStatus;
            document.getElementById('optionStatus').style.color = 
                optionStatus === 'In-the-Money' ? '#2ecc71' : 
                optionStatus === 'Out-of-the-Money' ? '#e74c3c' : 
                '#f1c40f';
            document.getElementById('totalValue').textContent = `$${totalValue.toFixed(2)}`;
            
            // Update net gain with proper formatting and color
            const netGainElement = document.getElementById('netGain');
            
            if (netGain > 0) {
                netGainElement.className = 'result-value positive';
                netGainElement.textContent = `+$${netGain.toFixed(2)}`;
            } else if (netGain < 0) {
                netGainElement.className = 'result-value negative';
                netGainElement.textContent = `-$${Math.abs(netGain).toFixed(2)}`;
            } else {
                netGainElement.className = 'result-value';
                netGainElement.textContent = `$0.00`;
            }
            
            // Update the math explanation to match the current values
            updateMathExplanation(optionType, currentPrice, strikePrice, numOptions, optionPrice, netGain);

            // Generate data points
            const pricePoints = [];
            const optionValuePoints = [];
            const netGainPoints = [];
            
            // Calculate step size based on price range
            const steps = 50;
            const stepSize = (maxPrice - minPrice) / steps;
            
            // Generate data for each price point
            for (let i = 0; i <= steps; i++) {
                const price = minPrice + (stepSize * i);
                pricePoints.push(price);
                
                let value = 0;
                if (optionType === 'call') {
                    value = Math.max(0, price - strikePrice);
                } else {
                    value = Math.max(0, strikePrice - price);
                }
                
                optionValuePoints.push(value);
                
                // Calculate net gain/loss at this price point (allowing negative values)
                const totalValueAtPrice = value * numOptions;
                const netGainAtPrice = totalValueAtPrice - optionCost;
                netGainPoints.push(netGainAtPrice);
            }
            
            // Update chart with new data (passing all required parameters)
            updateChart(optionType, strikePrice, pricePoints, optionValuePoints, netGainPoints);
        }

        function updateMathExplanation(optionType, currentPrice, strikePrice, numOptions, optionPrice, netGain) {
            const optionCost = optionPrice * numOptions;
            let intrinsicValue = 0;
            
            if (optionType === 'call') {
                intrinsicValue = Math.max(0, currentPrice - strikePrice);
            } else {
                intrinsicValue = Math.max(0, strikePrice - currentPrice);
            }
            
            const totalValue = intrinsicValue * numOptions;
            
            // Update step values in formula display
            document.getElementById('formula-intrinsic-value').textContent = `$${intrinsicValue.toFixed(2)}`;
            document.getElementById('formula-num-options').textContent = numOptions;
            document.getElementById('formula-option-cost').textContent = `$${optionCost.toFixed(2)}`;
            document.getElementById('formula-total-value').textContent = `$${totalValue.toFixed(2)}`;
            document.getElementById('formula-cost-total').textContent = `$${optionCost.toFixed(2)}`;
            
            const resultElement = document.getElementById('formula-result');
            resultElement.textContent = `${netGain >= 0 ? '+' : ''}$${Math.abs(netGain).toFixed(2)}`;
            resultElement.className = `formula-variable ${netGain >= 0 ? 'variable-result' : 'variable-result negative'}`;
            
            // Update explanation based on option type
            const explanation = document.querySelector('#formula-explanation-list');
            if (optionType === 'call') {
                explanation.innerHTML = `
                    <li><span class="formula-variable variable-intrinsic">Intrinsic Value</span> = ${currentPrice > strikePrice ? 
                        `Market Price - Strike Price = $${currentPrice.toFixed(2)} - $${strikePrice.toFixed(2)} = $${intrinsicValue.toFixed(2)}` : 
                        'Market Price < Strike Price, so $0.00'}</li>
                    <li><span class="formula-variable variable-cost">Option Cost</span> = Option Price × Number of Options = $${optionPrice.toFixed(2)} × ${numOptions} = $${optionCost.toFixed(2)}</li>
                    <li>Net Gain/Loss = ${netGain >= 0 ? '+' : ''}$${Math.abs(netGain).toFixed(2)} (${netGain >= 0 ? 'Profit' : 'Loss'})</li>
                `;
            } else {
                explanation.innerHTML = `
                    <li><span class="formula-variable variable-intrinsic">Intrinsic Value</span> = ${currentPrice < strikePrice ? 
                        `Strike Price - Market Price = $${strikePrice.toFixed(2)} - $${currentPrice.toFixed(2)} = $${intrinsicValue.toFixed(2)}` : 
                        'Strike Price < Market Price, so $0.00'}</li>
                    <li><span class="formula-variable variable-cost">Option Cost</span> = Option Price × Number of Options = $${optionPrice.toFixed(2)} × ${numOptions} = $${optionCost.toFixed(2)}</li>
                    <li>Net Gain/Loss = ${netGain >= 0 ? '+' : ''}$${Math.abs(netGain).toFixed(2)} (${netGain >= 0 ? 'Profit' : 'Loss'})</li>
                `;
            }
        }

        function updateChart(optionType, strikePrice, pricePoints, optionValuePoints, netGainPoints) {
            const ctx = document.getElementById('optionChart').getContext('2d');
            
            // Destroy existing chart if it exists
            if (optionChart) {
                optionChart.destroy();
            }
            
            // Create a new chart
            optionChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: pricePoints.map(p => `$${Math.round(p)}`),
                    datasets: [
                        {
                            label: 'Market Price',
                            data: pricePoints,
                            borderColor: '#3498db',
                            borderWidth: 2,
                            fill: false,
                            tension: 0
                        },
                        {
                            label: 'Strike Price',
                            data: pricePoints.map(() => strikePrice),
                            borderColor: '#34495e',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            fill: false,
                            tension: 0
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    layout: {
                        padding: {
                            top: 20,
                            right: 20,
                            bottom: 20,
                            left: 20
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            align: 'start',
                            labels: {
                                usePointStyle: true,
                                padding: 15,
                                font: {
                                    size: 13,
                                    family: "'Segoe UI', system-ui, -apple-system, sans-serif"
                                },
                                filter: function(item) {
                                    // Only show Market Price in legend
                                    return item.text === 'Market Price';
                                }
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(255, 255, 255, 0.95)',
                            titleColor: '#2c3e50',
                            bodyColor: '#2c3e50',
                            borderColor: '#e9ecef',
                            borderWidth: 1,
                            mode: 'index',
                            intersect: false,
                            padding: 10,
                            bodyFont: {
                                size: 13,
                                family: "'Segoe UI', system-ui, -apple-system, sans-serif"
                            },
                            titleFont: {
                                size: 13,
                                family: "'Segoe UI', system-ui, -apple-system, sans-serif"
                            },
                            callbacks: {
                                title: function(context) {
                                    // Get the actual market price from the pricePoints array
                                    const marketPrice = pricePoints[context[0].dataIndex];
                                    return `$${marketPrice.toFixed(2)}`;
                                },
                                label: function(context) {
                                    const numOptions = parseInt(document.getElementById('numOptions').value);
                                    const label = context.dataset.label;
                                    const strikePrice = parseFloat(document.getElementById('strikePrice').value);
                                    const optionPrice = parseFloat(document.getElementById('optionPrice').value);
                                    const optionType = document.getElementById('optionType').value;
                                    
                                    if (label === 'Market Price') {
                                        // Get the actual price directly from the pricePoints array
                                        const marketPrice = pricePoints[context.dataIndex];
                                        
                                        // Calculate intrinsic value based on option type
                                        let intrinsicValue = 0;
                                        if (optionType === 'call') {
                                            intrinsicValue = Math.max(0, marketPrice - strikePrice);
                                        } else {
                                            intrinsicValue = Math.max(0, strikePrice - marketPrice);
                                        }
                                        
                                        // Calculate total value
                                        const totalOptionValue = (intrinsicValue * numOptions).toFixed(2);
                                        
                                        // Calculate net gain/loss after exercise
                                        const optionCost = optionPrice * numOptions;
                                        const netGain = intrinsicValue * numOptions - optionCost;
                                        const netGainText = netGain >= 0 ? 
                                            `+$${netGain.toFixed(2)}` : 
                                            `-$${Math.abs(netGain).toFixed(2)}`;
                                        
                                        return `Market Price: $${marketPrice.toFixed(2)} (Total: $${totalOptionValue}, Net Gain/Loss: ${netGainText})`;
                                    }
                                    return null; // Don't show Strike Price in tooltip
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: true,
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            title: {
                                display: true,
                                text: 'Stock Price ($)',
                                font: {
                                    size: 13,
                                    family: "'Segoe UI', system-ui, -apple-system, sans-serif"
                                }
                            },
                            ticks: {
                                maxTicksLimit: 10,
                                callback: function(value, index, values) {
                                    const price = this.getLabelForValue(value);
                                    return price;
                                }
                            }
                        },
                        y: {
                            grid: {
                                display: true,
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            title: {
                                display: true,
                                text: 'Price ($)',
                                font: {
                                    size: 13,
                                    family: "'Segoe UI', system-ui, -apple-system, sans-serif"
                                }
                            },
                            ticks: {
                                maxTicksLimit: 10,
                                callback: function(value) {
                                    return '$' + value.toFixed(0);
                                }
                            }
                        }
                    },
                    animation: false,
                    elements: {
                        point: {
                            radius: 0
                        }
                    }
                },
                plugins: [{
                    id: 'moneyZones',
                    beforeDraw: (chart) => {
                        const {ctx, chartArea, scales} = chart;
                        const strikePrice = parseFloat(document.getElementById('strikePrice').value);
                        const strikePricePixel = scales.y.getPixelForValue(strikePrice);
                        
                        // Draw In-the-Money zone (green)
                        ctx.fillStyle = 'rgba(46, 204, 113, 0.3)';
                        if (optionType === 'call') {
                            ctx.fillRect(
                                chartArea.left,
                                chartArea.top,
                                chartArea.width,
                                strikePricePixel - chartArea.top
                            );
                        } else {
                            ctx.fillRect(
                                chartArea.left,
                                strikePricePixel,
                                chartArea.width,
                                chartArea.bottom - strikePricePixel
                            );
                        }

                        // Draw Out-of-the-Money zone (red)
                        ctx.fillStyle = 'rgba(231, 76, 60, 0.3)';
                        if (optionType === 'call') {
                            ctx.fillRect(
                                chartArea.left,
                                strikePricePixel,
                                chartArea.width,
                                chartArea.bottom - strikePricePixel
                            );
                        } else {
                            ctx.fillRect(
                                chartArea.left,
                                chartArea.top,
                                chartArea.width,
                                strikePricePixel - chartArea.top
                            );
                        }
                        
                        // Add zone labels
                        ctx.save();
                        ctx.fillStyle = '#2c3e50';
                        ctx.font = '14px "Segoe UI"';
                        ctx.textAlign = 'left';
                        
                        if (optionType === 'call') {
                            // In-the-Money label (top)
                            ctx.fillText('In-the-Money', chartArea.left + 10, strikePricePixel - 20);
                            // Out-of-the-Money label (bottom)
                            ctx.fillText('Out-of-the-Money', chartArea.left + 10, strikePricePixel + 30);
                        } else {
                            // Out-of-the-Money label (top)
                            ctx.fillText('Out-of-the-Money', chartArea.left + 10, strikePricePixel - 20);
                            // In-the-Money label (bottom)
                            ctx.fillText('In-the-Money', chartArea.left + 10, strikePricePixel + 30);
                        }

                        // Add At-the-Money label with arrow
                        ctx.textAlign = 'center';
                        ctx.fillText('At-the-Money', chartArea.left + chartArea.width / 2, strikePricePixel - 10);
                        
                        // Draw arrow
                        ctx.beginPath();
                        ctx.moveTo(chartArea.left + chartArea.width / 2 - 20, strikePricePixel + 5);
                        ctx.lineTo(chartArea.left + chartArea.width / 2 + 20, strikePricePixel + 5);
                        ctx.strokeStyle = '#2c3e50';
                        ctx.lineWidth = 1;
                        ctx.stroke();
                        
                        ctx.restore();
                    }
                }]
            });
        }

        // Add toggle functionality for math explanation
        document.addEventListener('DOMContentLoaded', function() {
            const toggleButton = document.getElementById('toggleExplanation');
            const mathExplanation = document.getElementById('mathExplanation');
            
            toggleButton.addEventListener('click', function() {
                mathExplanation.classList.toggle('visible');
                toggleButton.classList.toggle('expanded');
                
                if (mathExplanation.classList.contains('visible')) {
                    toggleButton.innerHTML = `
                        Hide Formula
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    `;
                } else {
                    toggleButton.innerHTML = `
                        Show Formula
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    `;
                }
            });
            
            // Initialize calculator
            calculateOptionValue();
        });
    </script>
    <!-- Chatbot Widget CSS Override -->
    <style>
        .gs-chatbot-widget {
            position: fixed !important;
            bottom: 20px !important;
            right: 20px !important;
            z-index: 999999 !important;
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        .gs-chatbot-widget * {
            visibility: visible !important;
        }
    </style>
    <!-- Chatbot Widget -->
    <script src="js/chatbotWidget.js"></script>
    <script>
        // Enhanced chatbot initialization with multiple retry attempts
        let chatbotInitAttempts = 0;
        const maxAttempts = 10;
        
        function initChatbot() {
            chatbotInitAttempts++;
            console.log(`🔧 Chatbot init attempt ${chatbotInitAttempts}/${maxAttempts}`);
            console.log('🔧 YikesAIChatbot available:', !!window.YikesAIChatbot);
            
            if (window.YikesAIChatbot) {
                try {
                    // Remove existing widget if any
                    const existingWidgets = document.querySelectorAll('.gs-chatbot-widget');
                    existingWidgets.forEach(widget => widget.remove());
                    
                    // Create new instance
                    window.yikesAIChatbot = new YikesAIChatbot({
                        apiKey: 'AIzaSyB4ix_spZPsxIw_A3T6X0y6dc33fCmkvqk',
                        position: 'bottom-right'
                    });
                    
                    console.log('✅ Vanilla chatbot initialized successfully');
                    
                    // Verify widget is visible
                    setTimeout(() => {
                        const widget = document.querySelector('.gs-chatbot-widget');
                        if (widget) {
                            console.log('✅ Chatbot widget found in DOM');
                            widget.style.display = 'block';
                            widget.style.visibility = 'visible';
                        } else {
                            console.log('❌ Chatbot widget not found in DOM');
                        }
                    }, 1000);
                    
                } catch (error) {
                    console.error('❌ Error initializing chatbot:', error);
                    if (chatbotInitAttempts < maxAttempts) {
                        setTimeout(initChatbot, 1000);
                    }
                }
            } else {
                console.log('🔧 YikesAIChatbot class not found');
                if (chatbotInitAttempts < maxAttempts) {
                    setTimeout(initChatbot, 500);
                }
            }
        }
        
        // Multiple initialization triggers
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initChatbot);
        } else {
            initChatbot();
        }
        
        // Additional fallback attempts
        setTimeout(initChatbot, 1000);
        setTimeout(initChatbot, 3000);
        setTimeout(initChatbot, 5000);
        
        // Window load fallback
        window.addEventListener('load', initChatbot);
    </script>
</body>
</html> 